{% extends 'base.html' %}
{% load i18n %}
{% get_current_language as CURRENT_LANGUAGE %}

{% block title %}{% trans 'menu_my_pending_approval_task' %}{% endblock %}

{% block first_breadcrums %}
{% if watersupplytype_id == 0 %}
<li class="breadcrumb-item active" aria-current="page">{% trans 'menu_water_supply' %}</li>
{% else %}
<li class="breadcrumb-item active" aria-current="page">{% trans 'menu_my_history_approval_task' %}</li>
{% endif %}
{% endblock %}

{% block content %}
<div class="table-responsive">
    <table class='table table-bordered' id="table_1">
        <thead>
            <tr>
                <th>{% trans 'water_supply_code' %}</th>
                <th>{% trans 'province' %}</th>
                <th>{% trans 'district' %}</th>
                <th>{% trans 'commune' %}</th>
                <th>{% trans 'village' %}</th>
                <th>{% trans 'created_at' %}</th>
                <th>{% trans 'approved_at' %}</th>
                <th>{% trans 'water_supply_type' %}</th>
                    <th>{% trans 'ws_status' %}</th>
                    <th></th>
            </tr>
        </thead>
        <tbody>
            {% if watersupplylist %}
            {% for ws in watersupplylist %}
                <tr>
                    <td>{{ ws.watersupply_id.water_supply_code }}</td>
                    
                    <td>
                        {% if CURRENT_LANGUAGE == 'en' %}
                            {{ ws.watersupply_id.province_id.name_en}}
                        {% else %}
                            {{ ws.watersupply_id.province_id.name_kh}}
                        {% endif %}
                    </td>
                    <td>
                        {% if CURRENT_LANGUAGE == 'en' %}
                            {{ ws.watersupply_id.district_id.name_en}}
                        {% else %}
                            {{ ws.watersupply_id.district_id.name_kh}}
                        {% endif %}
                    </td>
                    <td>
                        {% if CURRENT_LANGUAGE == 'en' %}
                            {{ ws.watersupply_id.commune_id.name_en}}
                        {% else %}
                            {{ ws.watersupply_id.commune_id.name_kh}}
                        {% endif %}
                    </td>
                    <td>
                        {% if CURRENT_LANGUAGE == 'en' %}
                            {{ ws.watersupply_id.village_id.name_en}}
                        {% else %}
                            {{ ws.watersupply_id.village_id.name_kh}}
                        {% endif %}
                    </td>
                    <td>{{ ws.watersupply_id.created_at }}</td>
                    <td>{{ ws.created_at }}</td>
                    <td>
                        {% if CURRENT_LANGUAGE == 'en' %}
                            {{ ws.watersupply_id.water_supply_type_id.name_en }}
                        {% else %}
                            {{ ws.watersupply_id.water_supply_type_id.name_kh }}
                        {% endif %}
                    </td>

                    {% comment %}Have not translate yet because name en is null{% endcomment %}
                    <td class="text-center">
                        <span class="badge badge-warning">
                            {% if CURRENT_LANGUAGE == 'en' %}
                                {{ ws.watersupply_id.main_status.status_name_en }}
                            {% else %}
                                {{ ws.watersupply_id.main_status.status_name_kh }}
                            {% endif %}
                        </span>
                    </td>
                    <td><a href="{% url 'watersupply_detail' id=ws.watersupply_id.id %}" class="btn btn-outline-primary btn-sm"><i class="fa fa-eye"></i> {% trans 'btn_view_detail' %}</a></td>
                </tr>
            {% endfor %}
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block script %}
<script type="text/javascript">
    $(function(){
        $(document).ready(function () {
            $('#table_1').DataTable({});
        });
    });

</script>
{% endblock %}